<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DarkCore Package Repo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <header>
    <button id="toggle-theme" onclick="toggleTheme()">üåô</button>
    <div class="tab-buttons">
      <button id="btn-usage" onclick="showSection('usage')">Usage</button>
      <div class="divider"></div>
      <button id="btn-packages" onclick="showSection('packages')">Packages</button>
    </div>
    <h1>
      <a href="https://github.com/ytreu111/darkcore-packages" target="_blank">
        DarkCore Packages Repository
      </a>
    </h1>
    <hr>
  </header>
  <main>
    <section id="usage">
      <h2>Repository Setup</h2>
      <section class="part">
        <p>Import the public key used to verify package signatures:</p>
        <div class="code-block">
          <p>Run this command on your OpenWrt device:</p>
          <pre>wget -O /tmp/key-build.pub https://ytreu111.github.io/darkcore-packages/key-build.pub && opkg-key add /tmp/key-build.pub</pre>
        </div>
        <p>Add the package feed to your OpenWrt configuration:</p>
        <div class="code-block">
          <p>Edit <code>/etc/opkg/customfeeds.conf</code>:</p>
          <pre>echo "src/gz openwrt-tailscale https://ytreu111.github.io/darkcore-packages" >> /etc/opkg/customfeeds.conf</pre>

          <p>Or manually add this line:</p>
          <pre>src/gz openwrt-tailscale https://ytreu111.github.io/darkcore-packages</pre>
        </div>
      </section>
    </section>
    <section id="packages" style="display: none;">
      <table>
        <thead>
        <tr>
          <th>File</th>
          <th>Size</th>
          <th>Date</th>
        </tr>
        </thead>
        <!-- tbody-anchor -->
          <tbody>
                        <tr>
                            <td><a href="Packages">Packages</a></td>
                            <td>4.0K</td>
                            <td>2025-09-04 Thu 21:49:57 UTC</td>
                        </tr>
                        <tr>
                            <td><a href="Packages.gz">Packages.gz</a></td>
                            <td>4.0K</td>
                            <td>2025-09-04 Thu 21:49:57 UTC</td>
                        </tr>
                        <tr>
                            <td><a href="Packages.sig">Packages.sig</a></td>
                            <td>4.0K</td>
                            <td>2025-09-04 Thu 21:49:57 UTC</td>
                        </tr>
                        <tr>
                            <td><a href="geoupdate_0.0.5-r1_aarch64_generic.ipk">geoupdate_0.0.5-r1_aarch64_generic.ipk</a></td>
                            <td>2.0M</td>
                            <td>2025-09-04 Thu 21:49:50 UTC</td>
                        </tr>
          </tbody>
        <!-- end-tbody-anchor -->
      </table>
    </section>
  </main>
  <footer class="footer">
    <hr>
    <p>
      <span>
        <span>Generated on:</span>
        <!-- date-anchor -->
        <span id="date"></span>
        <!-- end-date-anchor -->
      </span>
    </p>
  </footer>
</div>
<script>
  function showSection(id) {
    document.querySelectorAll('main > section').forEach(s => s.style.display = 'none')
    document.getElementById(id).style.display = 'block'

    const buttons = [
      { id: 'btn-usage', section: 'usage', label: 'Usage' },
      { id: 'btn-packages', section: 'packages', label: 'Packages' },
    ]

    buttons.forEach(btn => {
      const isActive = (id === btn.section)
      const el = document.getElementById(btn.id)
      el.classList.toggle('active', isActive)
      el.classList.toggle('inactive', !isActive)
      el.textContent = isActive ? `‚Ä£ ${btn.label}` : btn.label
      el.disabled = isActive
    })
  }

  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('pre').forEach((pre) => {
      const wrapper = document.createElement('div')
      wrapper.classList.add('pre-wrapper')

      pre.parentNode.insertBefore(wrapper, pre)
      wrapper.appendChild(pre)

      const btn = document.createElement('button')
      btn.className = 'copy-btn'
      btn.textContent = 'Copy'

      btn.addEventListener('click', () => {
        navigator.clipboard.writeText(pre.textContent).then(() => {
          btn.textContent = 'Copied!'
          btn.classList.add('copied')
          setTimeout(() => {
            btn.textContent = 'Copy'
            btn.classList.remove('copied')
          }, 2000)
        })
      })

      wrapper.appendChild(btn)
    })
  })

  function toggleTheme() {
    const isDark = document.body.classList.toggle('dark')
    localStorage.setItem('theme', isDark ? 'dark' : 'light')
    document.getElementById('toggle-theme').textContent = isDark ? '‚òÄÔ∏è' : 'üåô'
  }

  function initTheme() {
    const hour = new Date().getHours()
    const saved = localStorage.getItem('theme')
    const isDark = saved === 'dark' || (!saved && (hour < 6 || hour >= 18))
    if (isDark) {
      document.body.classList.add('dark')
      document.getElementById('toggle-theme').textContent = '‚òÄÔ∏è'
    } else {
      document.getElementById('toggle-theme').textContent = 'üåô'
    }
  }

  document.getElementById('btn-usage').click()
  initTheme()
</script>
</body>
</html>